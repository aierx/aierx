# jmh


plugin: JMH Java Microbenchmark Harness


```xml

    <properties>
        <jmh.version>1.37</jmh.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.openjdk.jmh</groupId>
            <artifactId>jmh-core</artifactId>
            <version>${jmh.version}</version>
        </dependency>
        <dependency>
            <groupId>org.openjdk.jmh</groupId>
            <artifactId>jmh-generator-annprocess</artifactId>
            <version>${jmh.version}</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>

```



```java
package com.aierx.flink.demo;

import org.openjdk.jmh.annotations.*;
import org.openjdk.jmh.runner.Runner;
import org.openjdk.jmh.runner.RunnerException;
import org.openjdk.jmh.runner.options.Options;
import org.openjdk.jmh.runner.options.OptionsBuilder;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.concurrent.TimeUnit;
import java.util.stream.Collectors;


@Warmup(iterations = 3, time = 3)
@Measurement(iterations = 5, time = 1)
@Fork(1)
@BenchmarkMode(Mode.AverageTime)
@OutputTimeUnit(TimeUnit.MILLISECONDS)
public class TestSpilt {

  static final private String input = "37036#0#387678#20_37036#14951#457714#3_37036#22298#469860#2_37036#5639#26288#209_37036#11253#441570#672_37036#24522#474691#78_37036#10737#475631#1_37036#11845#451398#89_37036#19270#466591#50_37036#11968#475484#67_37036#25438#477829#45_37036#7864#38675#2_37036#26814#480920#32_37036#3321#10679#717_37036#20055#465730#16_37036#23585#471767#89_37036#23883#476715#51_37036#26176#479841#10_37036#24539#474716#16_37036#15209#458899#25_37036#22412#469910#45_37036#26191#480050#2_37036#12310#468192#14_37036#25729#478759#8_31888#0#382918#19_31888#16159#461725#9_31888#15945#461168#2_31888#23448#471351#27_24901#0#360187#0_24901#10715#439724#5_24901#8871#432269#1_24901#8672#431040#672_24901#23581#471756#8_24901#21731#476745#21_24901#19857#482541#3_24901#14326#471706#18_24901#14017#453682#76_24901#24008#472972#40_24901#25377#477607#20_24901#25379#477610#49_22788#4553#21142#10_22788#10352#438421#0_37036#0#387678#20_37036#14951#457714#3_37036#22298#469860#2_37036#5639#26288#209_37036#11253#441570#672_37036#24522#474691#78_37036#10737#475631#1_37036#11845#451398#89_37036#19270#466591#50_37036#11968#475484#67_37036#25438#477829#45_37036#7864#38675#2_37036#26814#480920#32_37036#3321#10679#717_37036#20055#465730#16_37036#23585#471767#89_37036#23883#476715#51_37036#26176#479841#10_37036#24539#474716#16_37036#15209#458899#25_37036#22412#469910#45_37036#26191#480050#2_37036#12310#468192#14_37036#25729#478759#8_31888#0#382918#19_31888#16159#461725#9_31888#15945#461168#2_31888#23448#471351#27_24901#0#360187#0_24901#10715#439724#5_24901#8871#432269#1_24901#8672#431040#672_24901#23581#471756#8_24901#21731#476745#21_24901#19857#482541#3_24901#14326#471706#18_24901#14017#453682#76_24901#24008#472972#40_24901#25377#477607#20_24901#25379#477610#49_22788#4553#21142#10_22788#10352#438421#0_37036#0#387678#20_37036#14951#457714#3_37036#22298#469860#2_37036#5639#26288#209_37036#11253#441570#672_37036#24522#474691#78_37036#10737#475631#1_37036#11845#451398#89_37036#19270#466591#50_37036#11968#475484#67_37036#25438#477829#45_37036#7864#38675#2_37036#26814#480920#32_37036#3321#10679#717_37036#20055#465730#16_37036#23585#471767#89_37036#23883#476715#51_37036#26176#479841#10_37036#24539#474716#16_37036#15209#458899#25_37036#22412#469910#45_37036#26191#480050#2_37036#12310#468192#14_37036#25729#478759#8_31888#0#382918#19_31888#16159#461725#9_31888#15945#461168#2_31888#23448#471351#27_24901#0#360187#0_24901#10715#439724#5_24901#8871#432269#1_24901#8672#431040#672_24901#23581#471756#8_24901#21731#476745#21_24901#19857#482541#3_24901#14326#471706#18_24901#14017#453682#76_24901#24008#472972#40_24901#25377#477607#20_24901#25379#477610#49_22788#4553#21142#10_22788#10352#438421#0_37036#0#387678#20_37036#14951#457714#3_37036#22298#469860#2_37036#5639#26288#209_37036#11253#441570#672_37036#24522#474691#78_37036#10737#475631#1_37036#11845#451398#89_37036#19270#466591#50_37036#11968#475484#67_37036#25438#477829#45_37036#7864#38675#2_37036#26814#480920#32_37036#3321#10679#717_37036#20055#465730#16_37036#23585#471767#89_37036#23883#476715#51_37036#26176#479841#10_37036#24539#474716#16_37036#15209#458899#25_37036#22412#469910#45_37036#26191#480050#2_37036#12310#468192#14_37036#25729#478759#8_31888#0#382918#19_31888#16159#461725#9_31888#15945#461168#2_31888#23448#471351#27_24901#0#360187#0_24901#10715#439724#5_24901#8871#432269#1_24901#8672#431040#672_24901#23581#471756#8_24901#21731#476745#21_24901#19857#482541#3_24901#14326#471706#18_24901#14017#453682#76_24901#24008#472972#40_24901#25377#477607#20_24901#25379#477610#49_22788#4553#21142#10_22788#10352#438421#0_37036#0#387678#20_37036#14951#457714#3_37036#22298#469860#2_37036#5639#26288#209_37036#11253#441570#672_37036#24522#474691#78_37036#10737#475631#1_37036#11845#451398#89_37036#19270#466591#50_37036#11968#475484#67_37036#25438#477829#45_37036#7864#38675#2_37036#26814#480920#32_37036#3321#10679#717_37036#20055#465730#16_37036#23585#471767#89_37036#23883#476715#51_37036#26176#479841#10_37036#24539#474716#16_37036#15209#458899#25_37036#22412#469910#45_37036#26191#480050#2_37036#12310#468192#14_37036#25729#478759#8_31888#0#382918#19_31888#16159#461725#9_31888#15945#461168#2_31888#23448#471351#27_24901#0#360187#0_24901#10715#439724#5_24901#8871#432269#1_24901#8672#431040#672_24901#23581#471756#8_24901#21731#476745#21_24901#19857#482541#3_24901#14326#471706#18_24901#14017#453682#76_24901#24008#472972#40_24901#25377#477607#20_24901#25379#477610#49_22788#4553#21142#10_22788#10352#438421#0_37036#0#387678#20_37036#14951#457714#3_37036#22298#469860#2_37036#5639#26288#209_37036#11253#441570#672_37036#24522#474691#78_37036#10737#475631#1_37036#11845#451398#89_37036#19270#466591#50_37036#11968#475484#67_37036#25438#477829#45_37036#7864#38675#2_37036#26814#480920#32_37036#3321#10679#717_37036#20055#465730#16_37036#23585#471767#89_37036#23883#476715#51_37036#26176#479841#10_37036#24539#474716#16_37036#15209#458899#25_37036#22412#469910#45_37036#26191#480050#2_37036#12310#468192#14_37036#25729#478759#8_31888#0#382918#19_31888#16159#461725#9_31888#15945#461168#2_31888#23448#471351#27_24901#0#360187#0_24901#10715#439724#5_24901#8871#432269#1_24901#8672#431040#672_24901#23581#471756#8_24901#21731#476745#21_24901#19857#482541#3_24901#14326#471706#18_24901#14017#453682#76_24901#24008#472972#40_24901#25377#477607#20_24901#25379#477610#49_22788#4553#21142#10_22788#10352#438421#0";
    
    @Benchmark
    public List<Integer> measureName1() {

        List<Integer> parts = new ArrayList<>();
        int start = 0;
        for (int i = 0; i < input.length(); i++) {
            if (input.charAt(i) == '#') {
                parts.add(Integer.parseInt(input.substring(start, i)));
                start = i + 1;
                continue;
            }
            if (input.charAt(i) == '_') {
                parts.add(Integer.parseInt(input.substring(start, i)));
                start = i + 1;
            }
        }
        parts.add(Integer.parseInt(input.substring(start)));
        return parts;
    }

    @Benchmark
    public List<Integer> measureName2() {
        String[] tppBucketList = input.split("[#_]");
        List<Integer> tppBucketsList = Arrays.stream(tppBucketList).map(Integer::parseInt).collect(Collectors.toList());
        return tppBucketsList;
    }
    
    
    

    public static void main(String[] args) throws RunnerException {
        Options build = new OptionsBuilder()
                .include(TestSpilt.class.getSimpleName())
                .build();
        new Runner(build).run();
    }
}


```



